<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Update Password: iHack2020</title>
  <link rel="stylesheet" href="https://unpkg.com/bulma@0.8.0/css/bulma.min.css" />
  <link rel="stylesheet" type="text/css" href="/css/login.css">
  <script>
    var check = function () {
      if (document.getElementById('password').value == document.getElementById('confirmpassword').value) {
        alert('Password updated successfully')
        doPost();
        return true;
      } else {
        alert("Both password should be same")
        return false;
      }
    }

    function getGetParam(param) {
      var url_string = window.location.href

      let key_val = url_string.split('?');
      key_val.shift();

      let kvmap = {}
      for (let i = 0; i < key_val.length; i++) {
        let kv = key_val[i];
        
        let item = kv.split('=');
        kvmap[item[0]] = item[1]
      }
      return kvmap[param]
    }

    function doPost() {
      document.getElementById('regid_id').value = getGetParam('id');
      document.getElementById('time_id').value = getGetParam('time');
    }
  </script>
</head>

<body>
  <section class="hero">
    <div class="hero-body">
      <div class="container has-text-centered">
        <div class="column is-4 is-offset-4">
          <h3 class="title has-text-black">Change Password</h3>
          <hr class="login-hr">
          <p class="subtitle has-text-black"></p>
          <div class="box">
            <figure class="avatar">
              <img src="/images/login.png" height="30" width="40%">
            </figure>
            <form method="POST" onsubmit="return check()" action="/account/changePassword">
              <div class="field">
                <div class="control">
                  <input pattern=".{6,}" title="Enter minimum 6 letters" id="password" name="password" class="input is-medium" type="password" placeholder="Enter New Password"
                    style="color: black;font-weight: bold" autofocus="">
                  <br>
                  <input pattern=".{6,}" title="Enter minimum 6 letters" id="confirmpassword" name="confirmpassword" class="input is-medium" type="password" placeholder="Confirm Password"
                    style="color: black;font-weight: bold" autofocus="">

                  <input type="hidden" name="regid" id="regid_id">
                  <input type="hidden" name="time" id="time_id">
                </div>
              </div>

              <input class="mybutton button is-block is-medium is-fullwidth" type="submit" value="Confirm" />
            </form>
          </div>
        </div>
      </div>
    </div>
  </section>
</body>

</html>